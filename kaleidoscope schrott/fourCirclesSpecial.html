
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="icon" href="data:,">

<head>
    <title> four circles special</title>
</head>

<body>
</body>

<script type='module'>

import {
    CoordinateTransform,
    Pixels,
    ParamGui,
    output,
    map,
    guiUtils
} from "../libgui/modules.js";

import {
    Circle,
    circles,
    Intersection,
    intersections,
    basic
} from './modules.js';

// basic setup
const gui=new ParamGui({name:'test',closed:false});
// an output canvas and some test image
const outputGui=gui.addFolder('output image');
output.createCanvas(outputGui);
output.canvas.style.backgroundColor='grey';
output.createPixels();
const canvas = output.canvas;
const canvasContext = output.canvasContext;
outputGui.addParagraph('coordinate transform');
output.addCoordinateTransform(outputGui, false);
output.setInitialCoordinates(0, 0, 3);
map.setOutputDraw();
const inputGui=gui.addFolder('input image');
map.inputImage = '../libgui/testimage.jpg';
map.setupInputImage(inputGui);
const regionGui=gui.addFolder('regions');
map.regionControl(regionGui, 2);
map.makeNewColorTable(regionGui, 2);

map.mapping = function(point) {
    circles.map(point);
};

circles.makeGui(gui);
intersections.makeGui(gui,{closed:false});

const d=2;
let rt32=Math.sqrt(3)/2;
circles.add({radius:10,centerX:2.4,centerY:9, isInsideOutMap:false})
circles.add({radius:10,centerX:2.4,centerY:-9, isInsideOutMap:false})
intersections.add(circles.collection[0],circles.collection[1],4)


circles.collection[1].adjustToIntersections();
circles.add({radius:1.2,centerX:0.5,centerY:0.3})

intersections.add(circles.collection[0],circles.collection[2],99)


intersections.add(circles.collection[1],circles.collection[2],2)

circles.collection[2].adjustToIntersections();
circles.add({radius:0.7,centerX:-0.5,centerY:-0.5})
intersections.add(circles.collection[0],circles.collection[3],2)

intersections.add(circles.collection[2],circles.collection[3],2)

intersections.add(circles.collection[1],circles.collection[3],99)


circles.collection[3].adjustToIntersections();


map.drawImageChanged = function() {
map.draw();
    circles.draw()
}
Circle.draw = map.drawMapChanged;

output.mouseCtrlMoveAction = function(event) {
    if (circles.isSelected(event)) {
        output.canvas.style.cursor = "pointer";
    } else {
        output.canvas.style.cursor = "default";
    }
    output.pixels.show();
    circles.draw(false);
};

output.mouseCtrlDownAction=function(event){
    circles.select(event);
    output.pixels.show();
    circles.draw(false);
};

output.mouseCtrlWheelAction = function(event) {
    if (event.shiftPressed) {
        console.log('wheel')
        is.incDecN(event.wheelDelta);
        map.drawMapChanged();

    } else {
        circles.wheelAction(event);
        map.drawMapChanged();
    }
};

output.mouseCtrlDragAction=function(event){
    circles.dragAction(event);
    map.drawMapChanged();
};

output.firstDrawing();

console.log(basic.getProperties())


</script>

</html>