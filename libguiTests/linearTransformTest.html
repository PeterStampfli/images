
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<head>
    <title> linearTransform (test)</title>
</head>

<body>


</body>



<script type='module'>

import {
    CoordinateTransform,
    Pixels,
    ParamGui,
    output
} from "../libgui/modules.js";

const gui=new ParamGui({name:'test',closed:false});
// an output canvas and some test image
output.createCanvas(gui);
const canvas = output.canvas;
const canvasContext = output.canvasContext;
var p=new Pixels(canvas);
gui.addParagraph('coordinate transform')
output.addCoordinateTransform(gui,false);
function draw() {
    output.updateCanvasScale();
    output.updateCanvasTransform();
    p.updateArraySize();
    const color = {};
    const height = canvas.height;
    const width = canvas.width;
    const imageData = canvasContext.getImageData(0, 0, width, height);
    const pixels = imageData.data;
    const v = {};
    v.x = 1
    v.y = 1
    let xMin = 1000000;
    let xMax = -1000000;
    let index = 0;
    for (var j = 0; j < height; j++) {
        for (var i = 0; i < width; i++) {
            v.y = j;

            v.x = i;
            output.transform(v);

            let red = 255;
            let green = 0;
            let blue = 200;


            if ((v.x > 0.4) && (v.x < 0.6) && (v.y > 0.4) && (v.y < 0.6)) {
                green = 255;
            }
            if (v.x > 0.5) {
                blue = 0;
            }

            color.red = red;
            color.alpha = 255;
            color.green = green;
            color.blue = blue;
            p.setColorAtIndex(color,index);

            index += 1;
        }
    }
    // canvasContext.putImageData(imageData, 0, 0);
    p.show();
    canvasContext.lineWidth = 0.03;
    canvasContext.strokeRect(0.4, 0.4, 0.2, 0.2);
    console.log(p.getNearestColor(color,-2,3))
    console.log(p.getLinearColor(color,2,3))
    p.createIntegralColorTables();
}
output.draw=draw;
draw();
</script>

</html>