<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<head>
    <title>demo gui</title>
</head>

<body>

<canvas id="sq">test</canvas>

</body>

<script type="module">

import {
    ParamGui,
    InstantHelp
}
from "./modules.js"

const square = document.getElementById("sq");

square.style.width = "300px";
square.style.height = "300px";
square.style.backgroundColor = "red";

const gui = new ParamGui({}, {
    name: "demo controls",
    closed: false,
    closeOnTop: true
});

InstantHelp.setStyle({position:"bottomRight"});

gui.addHelp("This is a <strong>demo</strong>.");

const params = {};

gui.addParagraph("With gui.addParagraph() we can add text to the gui.");
gui.addParagraph("The $-keyboard key hides/shows the gui. The tab-key cycles through the inputs.")

gui.addParagraph("With gui.addVerticalSpace(...) we can add a spacing");
gui.addVerticalSpace(8,"blue");

gui.addParagraph("You can scroll through selections with the mouse wheel or up- and down arrows:");
params.letters="beta";
gui.add(params,"letters",["alpha","beta","gamma","delta","epsilon"]);

gui.addParagraph("There is a new image selection. It shows the choosen image or an image label:");

const haeckel="/images/libgui/haeckel/haeckel_";

const choices=[
    {name: "rins",value:1,icon:haeckel+"01.png"},
    {name: "zweiHaeck",value:22,icon:haeckel+"02.png"},
    {name: "no icon",value:999999},
    {name: "mehr",value:1,icon:"haeckel/haeckel_03.png"},
    {name: "13",value:13,icon:"haeckel/haeckel_04.png"},
    {name: "five",value:1456,icon:"haeckel/haeckel_05.png"},
    {name: "eight",value:897,icon:"haeckel/haeckel_06.png"}
    ];



params.image=22;

gui.addImageSelection(params,"image",choices);


gui.addParagraph("This color controller has an alpha channel. It controls the color and transparency of the square at the left:");

params.square = "#ff0000ff";
const co = gui.addColor(params, "square");
co.addHelp("Changes the color of the square at the left");
co.onChange(function(value) {
    console.log(value);
    square.style.backgroundColor = value;
});

gui.addParagraph("If the color parameter at initialization of the gui has no alpha value, then the controller too has no alpha and no range element:");
params.rgb = "#44ff00";
gui.addColor(params, "rgb");

gui.addParagraph("These are the basic controllers for numbers and strings:");

params.string = "some text";
gui.add(params, "string");

params.integer = 33;
gui.add(params,"integer",1,300);

params.otherInt =8;
gui.add(params,"otherInt",1,20,1);

params.real=2.71;
gui.add(params,"real",0,10,0.01);

gui.addParagraph("With controller.cyclic() numbers cycle through their min-max range:")
params.angle = 0;
gui.add(params,"angle",-180,180,0.5).cyclic().addHelp("If you go below -180 it will jump to +179");
params.hexa=0;
gui.add(params,"hexa",0,6).cyclic();

gui.addParagraph("Boolean and function buttons:");

params.boolean=false;
gui.add(params,"boolean");

params.say_hello=function(){
    console.log("hello");
};
gui.add(params,"say_hello");

const folder = gui.addFolder("folder", {
    closed: false
});

params.rgba = "#ff00ffbb";
folder.addColor(params, "rgba");
square.addEventListener("keydown", keylog, false);

square.setAttribute('tabindex', '-1');

square.addEventListener("keydown", stopTab, false);

square.addEventListener("mouseenter", function(){ square.focus();}, false);

function setFocus(){
    square.focus();
}


function keylog(event) {
    console.log("keylog: " + event.key);
}

function stopTab(event) {
    if (event.key === "Tab") {
        console.log("stopTab");
        event.preventDefault();
        event.stopPropagation();
    }
}

</script>

</html>