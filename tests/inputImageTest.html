<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />

<head>
    <title>inputImageTest</title>
</head>

<body>
<p>    check the console</p>

		<p>
				Input image file:
			<input type="file" accept="image/*" id="imageInput" >
</p>

		<canvas id="canvas" ></canvas>

</body>
<script src="../librarySource/vector2.js"></script>
<script src="../librarySource/vectorMap.js"></script>
<script src="../librarySource/mouseEvents.js"></script>
<script src="../librarySource/twoMirrors.js"></script>
<script src="../librarySource/fastFun.js"></script>
<script src="../librarySource/circle.js"></script>
<script src="../librarySource/line.js"></script>
<script src="../librarySource/button.js"></script>
<script src="../librarySource/color.js"></script>
<script src="../librarySource/fileSaver.js"></script>
<script src="../librarySource/pixelCanvas.js"></script>
<script src="../librarySource/controlImage.js"></script>
<script src="../librarySource/make.js"></script>


<script type="text/javascript">
    console.log("hi");


inputCanvas=new PixelCanvas()




var imageInputButton = new Button('imageInput');
imageInputButton.onChange(function(){
    inputCanvas.readImage(imageInputButton.button.files[0],function(){
    	       console.log("actioncallback");
controlImage.loadInputImage(inputCanvas)
controlImage.semiTransparent()

x=inputCanvas.width/2;
for (y=inputCanvas.height/4;y<inputCanvas.height*0.75;y++){
controlImage.setOpaque(x,y)
}


controlImage.pixelCanvas.showPixel()

controlImage.adjustScaleShift(new VectorMap(),inputCanvas)
    });
});

controlImage=new ControlImage("canvas",500)

controlImage.setAction(function () {
	console.log(controlImage.scale)
	console.log(controlImage.shiftX+" "+controlImage.shiftY)
controlImage.setOpaque(controlImage.shiftX,controlImage.shiftY)
controlImage.pixelCanvas.showPixel()
})

Make.setOutputImage(controlImage)

</script>

</html>