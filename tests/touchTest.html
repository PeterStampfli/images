<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />
	<meta name="viewport" content=" initial-scale=1,user-scalable=no">


<head>
    <title>touchTest</title>
</head>

<body onload="setup()">

    check the console
     <canvas id="myCanvas" width="500" height="300"></canvas>


</body>
<script src="../librarySource/fastFun.js"></script>
<script src="../librarySource/dom.js"></script>
<script src="../librarySource/log.js"></script>

<script src="../librarySource/mouseEvents.js"></script>
<script src="../librarySource/touchEvents.js"></script>


<script type="text/javascript">

Log.setup();



    var canvas = document.getElementById("myCanvas");
    canvas.width=window.innerWidth*0.8;
    canvas.height=window.innerHeight*0.8;
    var ctx = canvas.getContext("2d");
    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    var touchEvents;
    
    function setup(){
    console.log("setup");
    touchEvents=new TouchEvents("myCanvas");
    
      //  TouchEvents.doubleTouchDebug=true;

      touchEvents.moveAction=function(touchEvents){
   
   drawing(touchEvents);
 

   };
  
   touchEvents.startAction=function(touchEvents){
   
   drawing(touchEvents);
 

   };
   
     
   touchEvents.endAction=function(touchEvents){

   drawing(touchEvents);
 

   };
   }
   
    function drawing(touchEvents){
        ctx.fillStyle = "blue";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        if (touchEvents.touches.length===0){
            return;
        }
        ctx.fillStyle = "red";
        let size=40;
        let width=10;
        ctx.lineWidth=width;
        if (touchEvents.touches.length===1){
        ctx.fillStyle="green";
            ctx.fillRect(touchEvents.touches[0].x-size/2,touchEvents.touches[0].y-size/2,  size, size);
        }
        else {
            ctx.fillRect(touchEvents.touches[0].x-size/2,touchEvents.touches[0].y-size/2,  size, size);
            ctx.beginPath();
            ctx.moveTo(touchEvents.touches[0].x,touchEvents.touches[0].y);
            ctx.lineTo(touchEvents.centerX,touchEvents.centerY);
            ctx.strokeStyle="red";
            ctx.stroke();
            ctx.fillStyle = "yellow";
            ctx.fillRect(touchEvents.touches[1].x-size/2,touchEvents.touches[1].y-size/2,  size, size);
            ctx.beginPath();
            ctx.moveTo(touchEvents.touches[1].x,touchEvents.touches[1].y);
            ctx.lineTo(touchEvents.centerX,touchEvents.centerY);
            ctx.strokeStyle="yellow";
            ctx.stroke(); 
                    ctx.lineWidth=width/2;

            ctx.beginPath();
            ctx.moveTo(touchEvents.centerX+0.5*touchEvents.distance*Fast.cos(touchEvents.angle), touchEvents.centerY+0.5*touchEvents.distance*Fast.sin(touchEvents.angle));
            ctx.lineTo(touchEvents.centerX-0.5*touchEvents.distance*Fast.cos(touchEvents.angle), touchEvents.centerY-0.5*touchEvents.distance*Fast.sin(touchEvents.angle));
            ctx.strokeStyle="black";
            ctx.stroke();
        }
    }
   
 


</script>

</html>